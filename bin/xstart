#!/usr/bin/env bash

declare -r logdir="$HOME/log"
declare -r logfile="$logdir/xstart.log"
declare -r errfile="$logdir/xstart-err.log"
mkdir -vp "$logdir"

declare -r setxkbmap_bin="$(which setxkbmap)"
declare -r xkbcomp_bin="$(which xkbcomp)"
declare -r xkbcomp_cfg="$HOME/.xkb"
if [[ -x $setxkbmap_bin && -x $xkbcomp_bin && -d $xkbcomp_cfg ]]
then
    "$setxkbmap_bin" -I"$HOME/.xkb" -option "" robm dvorak-robm -print | "$xkbcomp_bin" -I"$HOME"/.xkb - "$DISPLAY" > "$logfile" 2> "$errfile"
fi
